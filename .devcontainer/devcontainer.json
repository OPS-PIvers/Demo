{
  "name": "GAS + Gemini Ultimate Pro Agent",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:20",

  "onCreateCommand": "npm install -g @google/clasp@latest @google/gemini-cli@latest @types/google-apps-script",

  "postCreateCommand": "bash -c 'mkdir -p src .gemini/commands .gemini/skills/gas-pro && echo \"{\\\"scriptId\\\":\\\"\\\",\\\"rootDir\\\":\\\"./src\\\"}\" > .clasp.json && echo -e \"**/**\\n!src/**\\n!appsscript.json\\n.devcontainer/\\n.gemini/\" > .claspignore && echo \"{\\\"timeZone\\\":\\\"America/New_York\\\",\\\"exceptionLogging\\\":\\\"STACKDRIVER\\\",\\\"runtimeVersion\\\":\\\"V8\\\"}\" > src/appsscript.json && cat <<EOF > .gemini/commands/deploy.toml\ndescription = \"Update Web App\"\nprompt = \"\"\"\n1. Run clasp push --force.\n2. Run clasp deployments.\n3. Find the ID for web app.\n4. Run clasp deploy -i <ID>.\n\"\"\"\nEOF\ncat <<EOF > .gemini/commands/auth.toml\ndescription = \"Auth Clasp\"\nprompt = \"\"\"\n1. Run clasp login --no-localhost.\n2. Copy the redirect URL and paste it here.\n3. Ask for the Script ID and run clasp setting scriptId.\n\"\"\"\nEOF\ncat <<EOF > .gemini/skills/gas-pro/SKILL.md\n---\nname: gas-pro\ndescription: Expertise in GAS V8, Manifests, and Troubleshooting\n---\n- Always use V8 syntax (arrow functions, template literals).\n- Audit Scopes: Compare src/*.gs logic against src/appsscript.json oauthScopes.\n- Troubleshooting: If clasp push fails with a 403 or \"API not enabled\" error, give the user this link: https://script.google.com/home/usersettings and tell them to toggle \"Google Apps Script API\" to ON.\n- Auto-Doc: Generate JSDoc with @param and @return. For custom functions, include @customfunction.\nEOF\ncat <<EOF > GEMINI.md\n# Project Context\n- Source: Code is in the /src directory.\n- Manifest: Local manifest is at /src/appsscript.json.\n- Actions: Use /auth for setup and /deploy for web app updates.\nEOF\necho \"# ðŸš€ Pro Setup Guide\\n1. Run 'gemini'\\n2. Type '/auth' to get started.\" > GUIDE.md && code GUIDE.md'",

  "customizations": {
    "vscode": {
      "settings": {
        "editor.formatOnSave": true,
        "files.associations": { "*.gs": "javascript" },
        "editor.defaultFormatter": "esbenp.prettier-vscode"
      },
      "extensions": [
        "googlecloudtools.gemini-code-assist-plugin",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode"
      ]
    }
  },
  "remoteUser": "node"
}
